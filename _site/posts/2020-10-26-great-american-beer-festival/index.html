<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.223">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Mark Druffel">
<meta name="dcterms.date" content="2020-10-26">

<title>Mark Druffel - Great American Beer Festival</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/initials.ico" rel="icon">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="../../site_libs/core-js-2.5.3/shim.min.js"></script>
<script src="../../site_libs/react-17.0.0/react.min.js"></script>
<script src="../../site_libs/react-17.0.0/react-dom.min.js"></script>
<script src="../../site_libs/reactwidget-1.0.0/react-tools.js"></script>
<script src="../../site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="../../site_libs/reactable-binding-0.3.0/reactable.js"></script>


<meta property="og:title" content="Mark Druffel - Great American Beer Festival">
<meta property="og:description" content="Tidy Tuesday analysis of the Great American Beer Festival winners from 1987 to 2020.">
<meta property="og:site-name" content="Mark Druffel">
<meta name="twitter:title" content="Mark Druffel - Great American Beer Festival">
<meta name="twitter:description" content="Tidy Tuesday analysis of the Great American Beer Festival winners from 1987 to 2020.">
<meta name="twitter:creator" content="@MarkDruffel">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About Me</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resume.html">
 <span class="menu-text">Resume</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/mark-druffel"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://linkedin.com/in/markdruffel"><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/MarkDruffel"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.instagram.com/markdruffel/"><i class="bi bi-instagram" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"><i class="bi bi-rss" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:mark.druffel@gmail.com?subject=mark-druffel.com"><i class="bi bi-envelope" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Great American Beer Festival</h1>
            <p class="subtitle lead">Tidy Tuesday analysis of the Great American Beer Festival winners from 1987 to 2020.</p>
                                <div class="quarto-categories">
                <div class="quarto-category">tidy-tuesday</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Mark Druffel </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">October 26, 2020</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<div class="cell">

<style type="text/css">
/* kableExtra tables & skimr */
table {
   font-size: 12px;
   width: 850px;
   margin: auto; 
   border-top: 1px solid #666; 
   border-bottom: 1px solid #666; 
}
table thead th { 
  font-size: 14px;
  border-bottom: 1px solid #ddd; 
}
th, td { 
  padding: 1px; 
}
tr:hover {
  background-color: #F8F8F8;
}

/* reactable */
/* Styles for the column headers */
.reactable-header {
  border-bottom: 2px solid #555;
  font-size: 14px;
  font-weight: 550;
}
.reactable-header:hover {
  background-color: #eee;
}
  
/* bar-charts */
.reactable-bar-cell {
  display: flex;
  align-items: center;
}
.reactable-number {
  font-family: "Fira Mono", Consolas, Monaco, monospace;
  font-size: 12px;
  white-space: pre;
}
.reactable-bar-chart {
  flex-grow: 1;
  margin-left: 6px;
  height: 14px;
}
.reactable-bar {
  height: 100%;
}
/* per-capita column (circles) */
.reactable-per-capita {
  width: 30px;
  height: 30px;
  border: 1px solid rgba(0, 0, 0, 0.03);
  border-radius: 50%;
  color: #000;
  font-size: 12px;
  letter-spacing: -2px;
  vertical-align: middle;
  line-height: 2;
}
.cell {
  box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.15);
}
/* tbl */
.reactable-tbl a {
  color: inherit;
  font-size: 13px;
  line-height: 18px;
}
.webkit-scrollbar {
  width: 10px;
}
.reactable-tbl-view {
  /* Center the table */
  margin: 0 auto;
  /* Reduce the table width */
  width: 900px;
  font-size: 14px;
  font-family: Karla, "Helvetica Neue", Helvetica, Arial, sans-serif;
}
.div-subtitle {
  margin: 8px 0;
  font-size: 14px;
}
.div-title {
  font-size: 20px;
  font-weight: 600;
}

/* subplot */
.subplot-view {
  width: 900px;
  height: 850px;
}
</style>
</div>
<section id="background" class="level2">
<h2 class="anchored" data-anchor-id="background">Background</h2>
<section id="tidy-tuesday" class="level3">
<h3 class="anchored" data-anchor-id="tidy-tuesday">Tidy Tuesday</h3>
<p>I give the same boiler plate on every Tidy Tuesday, post so skip ahead if you have read any. <a href="https://github.com/rfordatascience/tidytuesday">Tidy Tuesday</a> is a weekly social data project in the R for Data Science community where R users explore a new dataset and share their findings. If you’re an R user (or aspiring) I highly recommend participating. A few specific Tidy Tuesday resources I’d recommend are <a href="https://www.youtube.com/channel/UCeiiqmVK07qhY-wvg3IZiZQ">David Robinson’s Tidy Tuesday screen casts</a>, <a href="https://twitter.com/search?q=%23TidyTuesday&amp;src=typeahead_click">Twitter #TidyTuesday</a>, and the <a href="https://www.tidytuesday.com/">TidyTuesday podcast</a> with Jon Harmon. All Tidy Tuesday datasets are available on <a href="https://github.com/rfordatascience/tidytuesday">Github</a>.</p>
</section>
<section id="the-great-american-beer-festival" class="level3">
<h3 class="anchored" data-anchor-id="the-great-american-beer-festival">The Great American Beer Festival</h3>
<p>In this installation, we’re analyzing data from The Great American Beer Festival. The <a href="https://en.wikipedia.org/wiki/Great_American_Beer_Festival">Great American Beer Festival</a> (GABF) is a three-day annual festival in Denver, Colorado. Judges evaluate several thousand beers entered by hundreds of breweries and award gold, silver, and bronze medals in 100+ categories - though not every medal is necessarily awarded in each category. GABF was founded in 1982 and had 22 participating breweries in the first year. To download the data I use the <a href="https://github.com/rfordatascience/tidytuesday">tidytuesdayR</a> package.</p>
</section>
</section>
<section id="analysis" class="level2">
<h2 class="anchored" data-anchor-id="analysis">Analysis</h2>
<p>The GABF data set has an observation (row) for each beer that received an award for each year it received one. The obvious challenge with that is the dataset only includes beers awarded - it provides no data regarding participation. Without participation data many questions will go unanswered. We can’t infer the overall quality of beers based on total awards because we won’t know how many times they didn’t win. Huge bummer because many of the questions that came to mind when I saw the name of the dataset won’t be possible, c’est la vie.</p>
<p>I summarized the data set with <a href="https://docs.ropensci.org/skimr/">skimr</a>. The output allowed me to quickly get an understanding of the dataset and identify some data cleaning tasks. The data types of the columns are all character, except year which is double. I converted medal to factor so I could more easily analyze it as an ordinal attribute. State has 52 unique values, but I spotted duplicate records due to casing (<code>AK</code> &amp; <code>Ak</code> and <code>WA</code> &amp; <code>wa</code>). I changed the casing in these observations bringing the number of states to 50, including Washington D.C. meaning one state has no awards. Medal is a character which makes sense, but I added a numeric version in case I want to do some weighted totals.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>skimr<span class="sc">::</span><span class="fu">skim</span>(gabf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">gabf</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">4970</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">7</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">character</td>
<td style="text-align: left;">6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 19%">
<col style="width: 13%">
<col style="width: 19%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 8%">
<col style="width: 12%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">empty</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: right;">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">medal</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">beer_name</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">89</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3811</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">brewery</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">58</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1859</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">city</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">44</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">803</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">state</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">52</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">category</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">76</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">515</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 17%">
<col style="width: 12%">
<col style="width: 17%">
<col style="width: 9%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">year</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2007.88</td>
<td style="text-align: right;">8.68</td>
<td style="text-align: right;">1987</td>
<td style="text-align: right;">2002</td>
<td style="text-align: right;">2009</td>
<td style="text-align: right;">2015</td>
<td style="text-align: right;">2020</td>
<td style="text-align: left;">▂▃▅▆▇</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>gabf <span class="ot">&lt;-</span> gabf <span class="sc">%&gt;%</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">medal =</span> <span class="fu">fct_relevel</span>(medal, <span class="fu">c</span>(<span class="st">"Bronze"</span>, <span class="st">"Silver"</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state =</span> <span class="fu">str_to_upper</span>(state)) <span class="sc">%&gt;%</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">medal_numeric =</span> <span class="fu">if_else</span>(medal <span class="sc">==</span> <span class="st">"Gold"</span>, <span class="dv">3</span>, <span class="fu">if_else</span>(medal <span class="sc">==</span> <span class="st">"Silver"</span>, <span class="dv">2</span>, <span class="dv">1</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>I visualized awards over time and saw the dataset starts in 1987 (27 awards) and ends in 2020 (218 awards). Growth appears to be linear with only a few years that ever decreased.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>gabf <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tally</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> n)) <span class="sc">+</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> .<span class="dv">75</span>) <span class="sc">+</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Awards"</span>, <span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">title =</span> <span class="st">"Total Awards by Year"</span>) <span class="sc">+</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_blog</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/award_by_year_bar-1.png" class="img-fluid" width="864"></p>
</div>
</div>
<p>The annual growth in the number of awards appears to be similar for each medal class.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>gabf <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, medal) <span class="sc">%&gt;%</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tally</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> n, <span class="at">color =</span> medal)) <span class="sc">+</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"Awards"</span>, <span class="at">color =</span> <span class="st">"Medal"</span>, <span class="at">title =</span> <span class="st">"Medals by Year"</span>) <span class="sc">+</span> </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_blog</span>()  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/awards_by_year_medal_line-1.png" class="img-fluid" width="864"></p>
</div>
</div>
<p>The dataset has 515 different award categories, which appear to be different categories of beer. That’s more than I expected. Looking at the top 5 categories table, the category with the most awards is the <code>Classic Irish-Style Dry Stout</code> with 62. That accounts for 0.01 percent of the awards and less than two awards per year - meaning there aren’t categories that have been used throughout the 34 years. Given that, the category attribute will be difficult to use because it’s probably very inconsistent year to year.</p>
<section id="top-5-beer-categories" class="level4">
<h4 class="anchored" data-anchor-id="top-5-beer-categories">Top 5 Beer Categories</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>cats <span class="ot">&lt;-</span> gabf <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">category =</span> forcats<span class="sc">::</span><span class="fu">fct_lump</span>(category, <span class="at">n =</span> <span class="dv">5</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(category) <span class="sc">%&gt;%</span> </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tally</span>()</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>other_cat <span class="ot">&lt;-</span> cats <span class="sc">%&gt;%</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(category <span class="sc">==</span> <span class="st">"Other"</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>cats <span class="sc">%&gt;%</span> </span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(category <span class="sc">!=</span> <span class="st">"Other"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(dplyr<span class="sc">::</span><span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span> </span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(., other_cat) <span class="sc">%&gt;%</span> </span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable</span>(<span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Category"</span>, <span class="st">"Awards"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="st">"hover"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table class="table table-hover" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Category </th>
   <th style="text-align:right;"> Awards </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Classic Irish-Style Dry Stout </td>
   <td style="text-align:right;"> 62 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> American-Style Pale Ale </td>
   <td style="text-align:right;"> 61 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bock </td>
   <td style="text-align:right;"> 61 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Robust Porter </td>
   <td style="text-align:right;"> 61 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Imperial Stout </td>
   <td style="text-align:right;"> 60 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Other </td>
   <td style="text-align:right;"> 4665 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>The other attributes in my summary table (<code>beer_name</code>, <code>brewery</code>, and <code>city</code>) all appear to be formatted correctly, but quite disperse I won’t inspect them any further at the moment.</p>
<p>State is one attribute that seemed clean so I decided to take a closer look at that. The top 5 states account for almost 50 percent of all the awards. Two of the top five states are California and Texas, which are the two <a href="https://simple.wikipedia.org/wiki/List_of_U.S._states_by_population">most populous states in the US</a>.</p>
</section>
<section id="top-5-states" class="level4">
<h4 class="anchored" data-anchor-id="top-5-states">Top 5 States</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>states <span class="ot">&lt;-</span> gabf <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state =</span> forcats<span class="sc">::</span><span class="fu">fct_lump</span>(state, <span class="at">n =</span> <span class="dv">5</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state) <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tally</span>()</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>others <span class="ot">&lt;-</span> states <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"Other"</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>states <span class="sc">%&gt;%</span> </span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">!=</span> <span class="st">"Other"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(dplyr<span class="sc">::</span><span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(., others) <span class="sc">%&gt;%</span> </span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable</span>(<span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"State"</span>, <span class="st">"Awards"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="st">"hover"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table class="table table-hover" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> State </th>
   <th style="text-align:right;"> Awards </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> CA </td>
   <td style="text-align:right;"> 962 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> CO </td>
   <td style="text-align:right;"> 659 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> OR </td>
   <td style="text-align:right;"> 328 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> TX </td>
   <td style="text-align:right;"> 249 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> WI </td>
   <td style="text-align:right;"> 234 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Other </td>
   <td style="text-align:right;"> 2538 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>Analyzing the states effectively will require population data to control for or consider per capita. Any mapping will require some sort of <a href="https://en.wikipedia.org/wiki/Geographic_coordinate_system">GIS data</a>. These attributes are often packaged together because they’re used together frequently. There are a number of R libraries we can use. The most robust one I know off hand is <a href="https://github.com/walkerke/tidycensus">tidycensus</a>, which is a wrapper around the US Census Bureau’s API. I mention it for reference, but for simplicity I used <a href="https://github.com/hrbrmstr/albersusa">albersusa</a>. It has <a href="https://en.wikipedia.org/wiki/Simple_Features">simple features</a> which is the GIS data used by R’s <a href="https://github.com/r-spatial/sf/">sf</a> package.</p>
</section>
<section id="joining-alberusa-data" class="level4">
<h4 class="anchored" data-anchor-id="joining-alberusa-data">Joining alberusa data</h4>
<p>The albersa <a href="https://rdrr.io/github/hrbrmstr/albersusa/man/usa_sf.html">usa_sf()</a> function pulls a state dataset from the package which includes population and simple features. I wrote a function that takes a data frame, which I can reuse easily. I know I’ll likely make more changes to gabf and changes after my awards_by_state function runs so create an ephemeral function just makes it a bit easier than managing multiple versions of data frames in my experience. I added some state level measurements that I assume we’d use later.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>awards_by_state <span class="ot">&lt;-</span> . <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">state_total_awards =</span> <span class="fu">n</span>(), </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">state_total_awards_weighted =</span> <span class="fu">sum</span>(medal_numeric),</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">state_years_with_awards =</span> <span class="fu">n_distinct</span>(year)) <span class="sc">%&gt;%</span> </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(albersusa<span class="sc">::</span><span class="fu">usa_sf</span>(<span class="st">"laea"</span>), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state"</span><span class="ot">=</span><span class="st">"iso_3166_2"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"state_name"</span><span class="ot">=</span><span class="st">"name"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state_avg_award =</span> state_total_awards_weighted <span class="sc">/</span> state_total_awards,</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">state_total_awards_per_cap =</span> (state_total_awards <span class="sc">/</span> pop_2014) <span class="sc">*</span><span class="dv">100000</span>,</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">state_percent_total_awards =</span> state_total_awards <span class="sc">/</span> <span class="fu">sum</span>(state_total_awards, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span> </span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_na</span>(<span class="fu">list</span>(<span class="at">state_total_awards =</span> <span class="dv">0</span>, <span class="at">state_total_awards_weighted =</span> <span class="dv">0</span>, <span class="at">avg_award =</span> <span class="dv">0</span>, <span class="at">state_total_awards_per_cap =</span> <span class="dv">0</span>, <span class="at">state_percent_total_awards =</span> <span class="dv">0</span>, <span class="at">state_years_with_awards =</span> <span class="dv">0</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="state-rankings-table" class="level3">
<h3 class="anchored" data-anchor-id="state-rankings-table">State Rankings Table</h3>
<p>I wanted to view the state data with the populations and the new measures. I used a table view and some row-wise summaries to get more context for the top states and bottom states. I used the <a href="https://github.com/glin/reactable">reactable</a> pacakge because I could visualize row-wise summaries. It’s a lot of code, but most of it is pretty simple to adjust - I worked off of the package’s <a href="https://glin.github.io/reactable/articles/twitter-followers/twitter-followers.html">Twitter Followers demo</a> and <a href="https://glin.github.io/reactable/articles/womens-world-cup/womens-world-cup.html">Women’s World Cup Predictions demo</a>.</p>
<p>The table shows each state’s population, share of total awards, awards per capita (PC), and the average medal (Avg). The table is sorted by the awards per capita (PC). The table provides a few new insights. A few low population states (e.g.&nbsp;Wyoming, Alaska, &amp; Delaware) have a disproportionate number of awards. Alternatively, a few high population states are not well represented including New York, Georgia, and most of all Florida (no shock). Most states have a centered distribution of medals (average silver) with the exceptions mostly being states that have a sparse number of awards.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>make_color_pal <span class="ot">&lt;-</span> <span class="cf">function</span>(colors, <span class="at">bias =</span> <span class="dv">1</span>) {</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  get_color <span class="ot">&lt;-</span> <span class="fu">colorRamp</span>(colors, <span class="at">bias =</span> bias)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x) <span class="fu">rgb</span>(<span class="fu">get_color</span>(x), <span class="at">maxColorValue =</span> <span class="dv">255</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>off_rating_color <span class="ot">&lt;-</span> <span class="fu">make_color_pal</span>(<span class="fu">c</span>(<span class="st">"#f93014"</span>, <span class="st">"#f8fcf8"</span>, <span class="st">"#4DBE56"</span>), <span class="at">bias =</span> <span class="fl">1.3</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>rating_column <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">maxWidth =</span> <span class="dv">55</span>, ...) {</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colDef</span>(<span class="at">maxWidth =</span> maxWidth, <span class="at">align =</span> <span class="st">"center"</span>, <span class="at">class =</span> <span class="st">"cell number"</span>, ...)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>tbl <span class="ot">&lt;-</span> gabf <span class="sc">%&gt;%</span> </span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">awards_by_state</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state_name, pop_2014, state_percent_total_awards, state_total_awards_per_cap, state_avg_award) <span class="sc">%&gt;%</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reactable</span>(</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">height =</span> <span class="dv">550</span>,</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">striped =</span> <span class="cn">TRUE</span>,</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">defaultPageSize =</span> <span class="dv">51</span>,</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">defaultSorted =</span> <span class="st">"state_total_awards_per_cap"</span>,</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">defaultColDef =</span> <span class="fu">colDef</span>(<span class="at">headerClass =</span> <span class="st">"reactable-header"</span>, <span class="at">align =</span> <span class="st">"left"</span>),</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">list</span>(</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">state_name =</span> <span class="fu">colDef</span>( </span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">name =</span> <span class="st">"State"</span>,</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">width =</span> <span class="dv">150</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">pop_2014 =</span> <span class="fu">colDef</span>(</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">name =</span> <span class="st">"Population (2014)"</span>,</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">cell =</span> <span class="cf">function</span>(value) {</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>          width <span class="ot">&lt;-</span> <span class="fu">paste0</span>(value <span class="sc">*</span> <span class="dv">100</span> <span class="sc">/</span> <span class="fu">max</span>(.<span class="sc">$</span>pop_2014), <span class="st">"%"</span>)</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>          value <span class="ot">&lt;-</span> <span class="fu">format</span>(value, <span class="at">big.mark =</span> <span class="st">","</span>)</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>          value <span class="ot">&lt;-</span> <span class="fu">format</span>(value, <span class="at">width =</span> <span class="dv">14</span>, <span class="at">justify =</span> <span class="st">"right"</span>)</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>          bar <span class="ot">&lt;-</span> <span class="fu">div</span>(</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>            <span class="at">class =</span> <span class="st">"reactable-bar-chart"</span>,</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>            <span class="at">style =</span> <span class="fu">list</span>(<span class="at">marginRight =</span> <span class="st">"6px"</span>),</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>            <span class="fu">div</span>(<span class="at">class =</span> <span class="st">"reactable-bar"</span>, <span class="at">style =</span> <span class="fu">list</span>(<span class="at">width =</span> width, <span class="at">backgroundColor =</span> <span class="st">"#3fc1c9"</span>))</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>          <span class="fu">div</span>(<span class="at">class =</span> <span class="st">"reactable-bar-cell"</span>, <span class="fu">span</span>(<span class="at">class =</span> <span class="st">"reactable-number"</span>, value), bar)</span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">state_percent_total_awards =</span> <span class="fu">colDef</span>(</span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>        <span class="at">name =</span> <span class="st">"Percent of Total Awards"</span>,</span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>        <span class="at">cell =</span> <span class="fu">JS</span>(<span class="st">"function(cellInfo) {</span></span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a><span class="st">          // Format as percentage</span></span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a><span class="st">          const pct = (cellInfo.value * 100).toFixed(1) + '%'</span></span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a><span class="st">          // Pad single-digit numbers</span></span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a><span class="st">          let value = pct.padStart(5)</span></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a><span class="st">          // Render bar chart</span></span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a><span class="st">          return (</span></span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a><span class="st">            '&lt;div class=</span><span class="sc">\"</span><span class="st">reactable-bar-cell</span><span class="sc">\"</span><span class="st">&gt;' +</span></span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a><span class="st">              '&lt;span class=</span><span class="sc">\"</span><span class="st">reactable-number</span><span class="sc">\"</span><span class="st">&gt;' + value + '&lt;/span&gt;' +</span></span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a><span class="st">              '&lt;div class=</span><span class="sc">\"</span><span class="st">reactable-bar-chart</span><span class="sc">\"</span><span class="st"> style=</span><span class="sc">\"</span><span class="st">background-color: #e1e1e1</span><span class="sc">\"</span><span class="st">&gt;' +</span></span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a><span class="st">                '&lt;div class=</span><span class="sc">\"</span><span class="st">reactable-bar</span><span class="sc">\"</span><span class="st"> style=</span><span class="sc">\"</span><span class="st">width: ' + pct + '; background-color: #fc5185</span><span class="sc">\"</span><span class="st">&gt;&lt;/div&gt;' +</span></span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a><span class="st">              '&lt;/div&gt;' +</span></span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a><span class="st">            '&lt;/div&gt;'</span></span>
<span id="cb8-53"><a href="#cb8-53" aria-hidden="true" tabindex="-1"></a><span class="st">          )</span></span>
<span id="cb8-54"><a href="#cb8-54" aria-hidden="true" tabindex="-1"></a><span class="st">        }"</span>),</span>
<span id="cb8-55"><a href="#cb8-55" aria-hidden="true" tabindex="-1"></a>        <span class="at">html =</span> <span class="cn">TRUE</span></span>
<span id="cb8-56"><a href="#cb8-56" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb8-57"><a href="#cb8-57" aria-hidden="true" tabindex="-1"></a>      <span class="at">state_total_awards_per_cap =</span> <span class="fu">rating_column</span>(</span>
<span id="cb8-58"><a href="#cb8-58" aria-hidden="true" tabindex="-1"></a>        <span class="at">name =</span> <span class="st">"PC"</span>,</span>
<span id="cb8-59"><a href="#cb8-59" aria-hidden="true" tabindex="-1"></a>        <span class="at">defaultSortOrder =</span> <span class="st">"desc"</span>,</span>
<span id="cb8-60"><a href="#cb8-60" aria-hidden="true" tabindex="-1"></a>        <span class="at">cell =</span> <span class="cf">function</span>(value) {</span>
<span id="cb8-61"><a href="#cb8-61" aria-hidden="true" tabindex="-1"></a>          scaled <span class="ot">&lt;-</span> (value <span class="sc">-</span> <span class="fu">min</span>(.<span class="sc">$</span>state_total_awards_per_cap)) <span class="sc">/</span> (<span class="fu">max</span>(.<span class="sc">$</span>state_total_awards_per_cap) <span class="sc">-</span> <span class="fu">min</span>(.<span class="sc">$</span>state_total_awards_per_cap))</span>
<span id="cb8-62"><a href="#cb8-62" aria-hidden="true" tabindex="-1"></a>          color <span class="ot">&lt;-</span> <span class="fu">off_rating_color</span>(scaled)</span>
<span id="cb8-63"><a href="#cb8-63" aria-hidden="true" tabindex="-1"></a>          value <span class="ot">&lt;-</span> <span class="fu">format</span>(<span class="fu">round</span>(value, <span class="dv">1</span>), <span class="at">nsmall =</span> <span class="dv">1</span>)</span>
<span id="cb8-64"><a href="#cb8-64" aria-hidden="true" tabindex="-1"></a>          <span class="fu">div</span>(<span class="at">class =</span> <span class="st">"reactable-per-capita"</span>, <span class="at">style =</span> <span class="fu">list</span>(<span class="at">background =</span> color), value)}</span>
<span id="cb8-65"><a href="#cb8-65" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb8-66"><a href="#cb8-66" aria-hidden="true" tabindex="-1"></a>      <span class="at">state_avg_award =</span> <span class="fu">rating_column</span>(</span>
<span id="cb8-67"><a href="#cb8-67" aria-hidden="true" tabindex="-1"></a>        <span class="at">name =</span> <span class="st">"Avg"</span>,</span>
<span id="cb8-68"><a href="#cb8-68" aria-hidden="true" tabindex="-1"></a>        <span class="at">cell =</span> <span class="cf">function</span>(value) <span class="fu">format</span>(<span class="fu">round</span>(value, <span class="at">digits =</span> <span class="dv">2</span>), <span class="at">nsmall =</span> <span class="dv">2</span>)</span>
<span id="cb8-69"><a href="#cb8-69" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb8-70"><a href="#cb8-70" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb8-71"><a href="#cb8-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">compact =</span> <span class="cn">TRUE</span>,</span>
<span id="cb8-72"><a href="#cb8-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">class =</span> <span class="st">"reactable-tbl"</span>)</span>
<span id="cb8-73"><a href="#cb8-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-74"><a href="#cb8-74" aria-hidden="true" tabindex="-1"></a><span class="fu">div</span>(<span class="at">class =</span> <span class="st">"reactable-tbl-view"</span>,</span>
<span id="cb8-75"><a href="#cb8-75" aria-hidden="true" tabindex="-1"></a>    <span class="fu">div</span>(<span class="at">class =</span> <span class="st">"div-subtitle"</span>,</span>
<span id="cb8-76"><a href="#cb8-76" aria-hidden="true" tabindex="-1"></a>        <span class="fu">div</span>(<span class="at">class =</span> <span class="st">"div-title"</span>, <span class="st">"Total GABF Awards by State, Population Adjusted (1987 - 2020)"</span>),</span>
<span id="cb8-77"><a href="#cb8-77" aria-hidden="true" tabindex="-1"></a>        <span class="st">"When reviewing total awards received per capita, Colorado, Wyoming, Alaska, Oregon, &amp; Montana look like the big winners"</span></span>
<span id="cb8-78"><a href="#cb8-78" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb8-79"><a href="#cb8-79" aria-hidden="true" tabindex="-1"></a>    tbl</span>
<span id="cb8-80"><a href="#cb8-80" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="reactable-tbl-view">
<div class="div-subtitle">
<div class="div-title">Total GABF Awards by State, Population Adjusted (1987 - 2020)</div>
When reviewing total awards received per capita, Colorado, Wyoming, Alaska, Oregon, &amp; Montana look like the big winners
</div>
<div id="htmlwidget-c9e26f5d42e4e59e02c1" class="reactable html-widget" style="width:auto;height:550px;"></div>
<script type="application/json" data-for="htmlwidget-c9e26f5d42e4e59e02c1">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"state_name":["Alaska","Alabama","Arkansas","Arizona","California","Colorado","Connecticut","District of Columbia","Delaware","Florida","Georgia","Hawaii","Iowa","Idaho","Illinois","Indiana","Kansas","Kentucky","Louisiana","Massachusetts","Maryland","Maine","Michigan","Minnesota","Missouri","Mississippi","Montana","North Carolina","North Dakota","Nebraska","New Hampshire","New Jersey","New Mexico","Nevada","New York","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Virginia","Vermont","Washington","Wisconsin","Wyoming","West Virginia"],"pop_2014":[736732,4849377,2966369,6731484,38802500,5355866,3596677,658893,935614,19893297,10097343,1419561,3107126,1634464,12880580,6596855,2904021,4413457,4649676,6745408,5976407,1330089,9909877,5457173,6063589,2994079,1023579,9943964,739482,1881503,1326813,8938175,2085572,2839099,19746227,11594163,3878051,3970239,12787209,1055173,4832482,853175,6549352,26956958,2942902,8326289,626562,7061530,5757564,584153,1850326],"state_percent_total_awards":[0.0126760563380282,0.00120724346076459,0.00100603621730382,0.0185110663983903,0.193561368209256,0.132595573440644,0.00321931589537223,0.000804828973843058,0.00865191146881288,0.0124748490945674,0.00764587525150905,0.003420523138833,0.00563380281690141,0.00442655935613682,0.0311871227364185,0.0152917505030181,0.00643863179074447,0.00442655935613682,0.00120724346076459,0.0183098591549296,0.00925553319919517,0.00402414486921529,0.0223340040241449,0.0144869215291751,0.0261569416498994,0.000603621730382294,0.0110663983903421,0.0199195171026157,0.000402414486921529,0.00241448692152917,0.003420523138833,0.00583501006036217,0.0140845070422535,0.0108651911468813,0.0249496981891348,0.0253521126760563,0.000603621730382294,0.0659959758551308,0.0438631790744467,0.000603621730382294,0.00422535211267606,0.00100603621730382,0.00925553319919517,0.0501006036217304,0.0156941649899396,0.0277665995975855,0.00382293762575453,0.0404426559356137,0.0470824949698189,0.0116700201207243,0],"state_total_awards_per_cap":[8.55127780522632,0.123727233415756,0.168556238283234,1.3667120058519,2.47922169963276,12.3042660141236,0.444855070388584,0.607078842847018,4.59591241687277,0.311662767614639,0.37633662637785,1.19755332810637,0.901154314308464,1.34600700902559,1.20336196040861,1.15206412752744,1.10192040622296,0.498475458127269,0.129041249325759,1.34906591269201,0.769693228724215,1.50365877772089,1.12009462882334,1.31936444015977,2.14394478253721,0.100197756973012,5.37330289113004,0.995578825506609,0.27045959198466,0.637787981204388,1.28126570963655,0.324451020482369,3.35639335395757,1.90201187066742,0.627968067013511,1.08675373979131,0.0773584462917069,8.26146738269409,1.70482862992229,0.284313567538214,0.434559300996879,0.586046239048261,0.702359561678774,0.923694728463056,2.65044503690575,1.65740103424227,3.03242137250583,2.84640863948748,4.06421882587844,9.92890561205711,0],"state_avg_award":[2.01587301587302,1.33333333333333,2.2,2.02173913043478,2.01039501039501,2.00303490136571,2.0625,2,1.93023255813953,2.12903225806452,1.76315789473684,1.82352941176471,2.07142857142857,1.95454545454545,1.94193548387097,2.07894736842105,2.0625,1.81818181818182,2.33333333333333,2.02197802197802,1.93478260869565,2.2,1.82882882882883,1.88888888888889,1.92307692307692,1.66666666666667,1.98181818181818,1.8989898989899,1,1.83333333333333,2.05882352941176,1.79310344827586,1.98571428571429,1.94444444444444,2.01612903225806,2.03174603174603,2.33333333333333,2.00609756097561,1.99082568807339,1.33333333333333,2.14285714285714,1.4,1.93478260869565,2.1285140562249,1.96153846153846,1.92753623188406,2.05263157894737,2.09950248756219,2.01709401709402,2.17241379310345,"NA"]},"columns":[{"accessor":"state_name","name":"State","type":"factor","align":"left","headerClassName":"reactable-header","width":150},{"accessor":"pop_2014","name":"Population (2014)","type":"numeric","align":"left","headerClassName":"reactable-header","cell":[{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["       736,732"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"1.89867147735326%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     4,849,377"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"12.497589072869%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     2,966,369"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"7.64478835126603%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     6,731,484"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"17.3480677791379%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["    38,802,500"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"100%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     5,355,866"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"13.8028889891115%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     3,596,677"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"9.2691888409252%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["       658,893"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"1.69806842342633%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["       935,614"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"2.4112209264867%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["    19,893,297"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"51.2680806649056%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["    10,097,343"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"26.0224031956704%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     1,419,561"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"3.65842664776754%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     3,107,126"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"8.00754075124025%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     1,634,464"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"4.21226467366793%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["    12,880,580"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"33.1952322659622%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     6,596,855"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"17.0011081760196%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     2,904,021"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"7.48410798273307%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     4,413,457"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"11.3741563043618%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     4,649,676"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"11.9829289349913%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     6,745,408"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"17.3839520649443%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     5,976,407"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"15.4021184202049%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     1,330,089"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"3.42784356678049%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     9,909,877"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"25.5392745312802%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     5,457,173"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"14.0639726821725%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     6,063,589"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"15.6267998195993%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     2,994,079"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"7.716201275691%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     1,023,579"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"2.63792023709812%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     9,943,964"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"25.627121963791%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["       739,482"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"1.90575864957155%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     1,881,503"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"4.84892210553444%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     1,326,813"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"3.41940081180336%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     8,938,175"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"23.0350492880613%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     2,085,572"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"5.37483925004832%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     2,839,099"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"7.3167940210038%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["    19,746,227"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"50.8890586946717%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["    11,594,163"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"29.8799381483152%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     3,878,051"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"9.99433283937891%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     3,970,239"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"10.2319154693641%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["    12,787,209"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"32.9546008633464%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     1,055,173"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"2.71934282584885%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     4,832,482"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"12.4540480639134%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["       853,175"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"2.19876296630372%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     6,549,352"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"16.8786856516977%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["    26,956,958"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"69.4722195734811%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     2,942,902"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"7.58431028928548%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     8,326,289"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"21.4581251208041%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["       626,562"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"1.6147464725211%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     7,061,530"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"18.1986469943947%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     5,757,564"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"14.8381264093808%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["       584,153"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"1.50545196830101%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]},{"name":"div","attribs":{"className":"reactable-bar-cell"},"children":[{"name":"span","attribs":{"className":"reactable-number"},"children":["     1,850,326"]},{"name":"div","attribs":{"style":{"marginRight":"6px"},"className":"reactable-bar-chart"},"children":[{"name":"div","attribs":{"style":{"width":"4.76857418980736%","backgroundColor":"#3fc1c9"},"className":"reactable-bar"},"children":[]}]}]}]},{"accessor":"state_percent_total_awards","name":"Percent of Total Awards","type":"numeric","align":"left","headerClassName":"reactable-header","cell":"function(cellInfo) {\n          // Format as percentage\n          const pct = (cellInfo.value * 100).toFixed(1) + '%'\n          // Pad single-digit numbers\n          let value = pct.padStart(5)\n          // Render bar chart\n          return (\n            '<div class=\"reactable-bar-cell\">' +\n              '<span class=\"reactable-number\">' + value + '<\/span>' +\n              '<div class=\"reactable-bar-chart\" style=\"background-color: #e1e1e1\">' +\n                '<div class=\"reactable-bar\" style=\"width: ' + pct + '; background-color: #fc5185\"><\/div>' +\n              '<\/div>' +\n            '<\/div>'\n          )\n        }","html":true},{"accessor":"state_total_awards_per_cap","name":"PC","type":"numeric","align":"center","headerClassName":"reactable-header","defaultSortDesc":true,"cell":[{"name":"div","attribs":{"style":{"background":"#A4DDA9"},"className":"reactable-per-capita"},"children":["8.6"]},{"name":"div","attribs":{"style":{"background":"#F83519"},"className":"reactable-per-capita"},"children":["0.1"]},{"name":"div","attribs":{"style":{"background":"#F8361B"},"className":"reactable-per-capita"},"children":["0.2"]},{"name":"div","attribs":{"style":{"background":"#F86752"},"className":"reactable-per-capita"},"children":["1.4"]},{"name":"div","attribs":{"style":{"background":"#F89585"},"className":"reactable-per-capita"},"children":["2.5"]},{"name":"div","attribs":{"style":{"background":"#4DBE56"},"className":"reactable-per-capita"},"children":["12.3"]},{"name":"div","attribs":{"style":{"background":"#F84228"},"className":"reactable-per-capita"},"children":["0.4"]},{"name":"div","attribs":{"style":{"background":"#F8482F"},"className":"reactable-per-capita"},"children":["0.6"]},{"name":"div","attribs":{"style":{"background":"#F8EBE5"},"className":"reactable-per-capita"},"children":["4.6"]},{"name":"div","attribs":{"style":{"background":"#F83C22"},"className":"reactable-per-capita"},"children":["0.3"]},{"name":"div","attribs":{"style":{"background":"#F83F25"},"className":"reactable-per-capita"},"children":["0.4"]},{"name":"div","attribs":{"style":{"background":"#F8604A"},"className":"reactable-per-capita"},"children":["1.2"]},{"name":"div","attribs":{"style":{"background":"#F8543D"},"className":"reactable-per-capita"},"children":["0.9"]},{"name":"div","attribs":{"style":{"background":"#F86651"},"className":"reactable-per-capita"},"children":["1.3"]},{"name":"div","attribs":{"style":{"background":"#F8614A"},"className":"reactable-per-capita"},"children":["1.2"]},{"name":"div","attribs":{"style":{"background":"#F85F48"},"className":"reactable-per-capita"},"children":["1.2"]},{"name":"div","attribs":{"style":{"background":"#F85C46"},"className":"reactable-per-capita"},"children":["1.1"]},{"name":"div","attribs":{"style":{"background":"#F8442A"},"className":"reactable-per-capita"},"children":["0.5"]},{"name":"div","attribs":{"style":{"background":"#F83519"},"className":"reactable-per-capita"},"children":["0.1"]},{"name":"div","attribs":{"style":{"background":"#F86751"},"className":"reactable-per-capita"},"children":["1.3"]},{"name":"div","attribs":{"style":{"background":"#F84F37"},"className":"reactable-per-capita"},"children":["0.8"]},{"name":"div","attribs":{"style":{"background":"#F86D58"},"className":"reactable-per-capita"},"children":["1.5"]},{"name":"div","attribs":{"style":{"background":"#F85D47"},"className":"reactable-per-capita"},"children":["1.1"]},{"name":"div","attribs":{"style":{"background":"#F86550"},"className":"reactable-per-capita"},"children":["1.3"]},{"name":"div","attribs":{"style":{"background":"#F88775"},"className":"reactable-per-capita"},"children":["2.1"]},{"name":"div","attribs":{"style":{"background":"#F83418"},"className":"reactable-per-capita"},"children":["0.1"]},{"name":"div","attribs":{"style":{"background":"#EFF8EF"},"className":"reactable-per-capita"},"children":["5.4"]},{"name":"div","attribs":{"style":{"background":"#F85841"},"className":"reactable-per-capita"},"children":["1.0"]},{"name":"div","attribs":{"style":{"background":"#F83B20"},"className":"reactable-per-capita"},"children":["0.3"]},{"name":"div","attribs":{"style":{"background":"#F84A31"},"className":"reactable-per-capita"},"children":["0.6"]},{"name":"div","attribs":{"style":{"background":"#F8644E"},"className":"reactable-per-capita"},"children":["1.3"]},{"name":"div","attribs":{"style":{"background":"#F83D22"},"className":"reactable-per-capita"},"children":["0.3"]},{"name":"div","attribs":{"style":{"background":"#F8B9AD"},"className":"reactable-per-capita"},"children":["3.4"]},{"name":"div","attribs":{"style":{"background":"#F87D6A"},"className":"reactable-per-capita"},"children":["1.9"]},{"name":"div","attribs":{"style":{"background":"#F84930"},"className":"reactable-per-capita"},"children":["0.6"]},{"name":"div","attribs":{"style":{"background":"#F85C45"},"className":"reactable-per-capita"},"children":["1.1"]},{"name":"div","attribs":{"style":{"background":"#F83317"},"className":"reactable-per-capita"},"children":["0.1"]},{"name":"div","attribs":{"style":{"background":"#ABE0AF"},"className":"reactable-per-capita"},"children":["8.3"]},{"name":"div","attribs":{"style":{"background":"#F87561"},"className":"reactable-per-capita"},"children":["1.7"]},{"name":"div","attribs":{"style":{"background":"#F83B20"},"className":"reactable-per-capita"},"children":["0.3"]},{"name":"div","attribs":{"style":{"background":"#F84127"},"className":"reactable-per-capita"},"children":["0.4"]},{"name":"div","attribs":{"style":{"background":"#F8472E"},"className":"reactable-per-capita"},"children":["0.6"]},{"name":"div","attribs":{"style":{"background":"#F84C34"},"className":"reactable-per-capita"},"children":["0.7"]},{"name":"div","attribs":{"style":{"background":"#F8553E"},"className":"reactable-per-capita"},"children":["0.9"]},{"name":"div","attribs":{"style":{"background":"#F89C8C"},"className":"reactable-per-capita"},"children":["2.7"]},{"name":"div","attribs":{"style":{"background":"#F8735F"},"className":"reactable-per-capita"},"children":["1.7"]},{"name":"div","attribs":{"style":{"background":"#F8AB9E"},"className":"reactable-per-capita"},"children":["3.0"]},{"name":"div","attribs":{"style":{"background":"#F8A495"},"className":"reactable-per-capita"},"children":["2.8"]},{"name":"div","attribs":{"style":{"background":"#F8D5CD"},"className":"reactable-per-capita"},"children":["4.1"]},{"name":"div","attribs":{"style":{"background":"#84D28A"},"className":"reactable-per-capita"},"children":["9.9"]},{"name":"div","attribs":{"style":{"background":"#F93014"},"className":"reactable-per-capita"},"children":["0.0"]}],"maxWidth":55,"className":"cell number"},{"accessor":"state_avg_award","name":"Avg","type":"numeric","align":"center","headerClassName":"reactable-header","cell":["2.02","1.33","2.20","2.02","2.01","2.00","2.06","2.00","1.93","2.13","1.76","1.82","2.07","1.95","1.94","2.08","2.06","1.82","2.33","2.02","1.93","2.20","1.83","1.89","1.92","1.67","1.98","1.90","1.00","1.83","2.06","1.79","1.99","1.94","2.02","2.03","2.33","2.01","1.99","1.33","2.14","1.40","1.93","2.13","1.96","1.93","2.05","2.10","2.02","2.17","NA"],"maxWidth":55,"className":"cell number"}],"defaultSorted":[{"id":"state_total_awards_per_cap","desc":true}],"defaultPageSize":51,"paginationType":"numbers","showPageInfo":true,"minRows":1,"striped":true,"compact":true,"className":"reactable-tbl","height":"550px","dataKey":"416d118afad8c23c2a51c7f4d47c7330"},"children":[]},"class":"reactR_markup"},"evals":["tag.attribs.columns.2.cell"],"jsHooks":[]}</script>
</div>
</div>
</div>
<p>Colorado is a great state for beer, but I would not expect it to be distinguished as a clear leader among the states. Similar story with Wyoming. Again, the data set does not provide information regarding participation. I suspect there is skew in the number of awards won by state because the festival is always held in Denver. Breweries located closer to Denver are more likely to participate.</p>
<p>Separately, time obviously plays a significant role that is not captured by the above table. The festival is older than most of the breweries that participated in 2020. The competition in 2020 was probably completely different, more crowded, than it was in 1987. When looking at total awards, we’re not accounting for that.</p>
<section id="brief-usa-beer-history" class="level4">
<h4 class="anchored" data-anchor-id="brief-usa-beer-history">Brief USA Beer History</h4>
<p>A little history on brewing in the US helps us better understand the time variable in the absencense of participation data. <a href="https://homebrewsupply.com/learn/the-complete-history-of-homebrew.html">Jimmy Carter signed HR 1337</a> into law which made it explicitly legal to homebrew beer. When that law was passed, there were only ~50 breweries in the USA. Today, there are ~7k permitted breweries. You can read more in <a href="https://vinepair.com/map-american-craft-brewing-history/">this</a> interesting article on Vinepair. With that in mind, when the festival started breweries like Anheuser-Busch, Miller Brewing Company, and Coors Brewing Company controlled even more of the market share than they do today. The newcomers at that time were Boston Beer Company (i.e.&nbsp;Sam Adams) and Alaskan Brewing Co., founded in 1984 and 1986 respectively. That history plays a significant role in our analysis because the newer breweries of today are years behind these older breweries with regard to winning awards. <img src="images/us_permitted_breweries_line.PNG" class="img-fluid" width="900"></p>
</section>
</section>
<section id="animated-map" class="level3">
<h3 class="anchored" data-anchor-id="animated-map">Animated Map</h3>
<p>I visualized the award data in a <a href="https://en.wikipedia.org/wiki/Choropleth_map">Choropleth map</a>. To capture the year data, I used <a href="https://github.com/thomasp85/gganimate">gganimate</a> to loop through and create a map for each year in a <a href="https://en.wikipedia.org/wiki/GIF">gif</a>. To scale the color of the Choropleth by the specific year, rather than by the entire 34 years, I updated the awards_by_state function to include year (awards_by_state_year). It’s a bit of code to calculate different sums and counts for each level of aggregation and to impute records for missing years, but <a href="https://dplyr.tidyverse.org/">dplyr</a> and <a href="https://tidyr.tidyverse.org/">tidyr</a> do the heavy lifting. Nesting the annual observations in a data frame column keeps the data frame at 51 rows and prevents duplicating the simple features data for each year. The ggplot aesthetics will not take the nested data, but it’s easier to work with the data frame that way for other purposes and the function will probably be handy later. Below is the function spelled out.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creates a column with the year total, every row with the same year has the same value</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>awards_by_state_year <span class="ot">&lt;-</span> . <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_count</span>(year, <span class="at">name =</span> <span class="st">"year_total_awards"</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Aggregates by year, state, and year total and counts the number of rows</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>awards_by_state_year <span class="ot">&lt;-</span> . <span class="sc">%&gt;%</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_count</span>(year, <span class="at">name =</span> <span class="st">"year_total_awards"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state, year, year_total_awards) <span class="sc">%&gt;%</span> </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">state_year_total_awards =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Joins missing states (from state.abb) and imputes the missing years and zero awards for each</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>awards_by_state_year <span class="ot">&lt;-</span> . <span class="sc">%&gt;%</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_count</span>(year, <span class="at">name =</span> <span class="st">"year_total_awards"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state, year, year_total_awards) <span class="sc">%&gt;%</span> </span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">state_year_total_awards =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(<span class="fu">tibble</span>(<span class="at">state =</span> state.abb), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state"</span> <span class="ot">=</span> <span class="st">"state"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_na</span>(<span class="fu">list</span>(<span class="at">year =</span> <span class="dv">1987</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">complete</span>(state, <span class="fu">nesting</span>(year)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_na</span>(<span class="fu">list</span>(<span class="at">state_year_total_awards =</span> <span class="dv">0</span>))</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Imputes year_total_awards for the new years that were imputed in the last step  </span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>awards_by_state_year <span class="ot">&lt;-</span> . <span class="sc">%&gt;%</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_count</span>(year, <span class="at">name =</span> <span class="st">"year_total_awards"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state, year, year_total_awards) <span class="sc">%&gt;%</span> </span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">state_year_total_awards =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(<span class="fu">tibble</span>(<span class="at">state =</span> state.abb), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state"</span> <span class="ot">=</span> <span class="st">"state"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_na</span>(<span class="fu">list</span>(<span class="at">year =</span> <span class="dv">1987</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">complete</span>(state, <span class="fu">nesting</span>(year)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_na</span>(<span class="fu">list</span>(<span class="at">state_year_total_awards =</span> <span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_total_awards =</span> <span class="fu">max</span>(year_total_awards, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the percent of year total for each record (Choropleth fill) </span></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>awards_by_state_year <span class="ot">&lt;-</span> . <span class="sc">%&gt;%</span></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_count</span>(year, <span class="at">name =</span> <span class="st">"year_total_awards"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state, year, year_total_awards) <span class="sc">%&gt;%</span> </span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">state_year_total_awards =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(<span class="fu">tibble</span>(<span class="at">state =</span> state.abb), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state"</span> <span class="ot">=</span> <span class="st">"state"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_na</span>(<span class="fu">list</span>(<span class="at">year =</span> <span class="dv">1987</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">complete</span>(state, <span class="fu">nesting</span>(year)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_na</span>(<span class="fu">list</span>(<span class="at">state_year_total_awards =</span> <span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_total_awards =</span> <span class="fu">max</span>(year_total_awards, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct_of_year_total_awards =</span> state_year_total_awards <span class="sc">/</span> year_total_awards)</span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a><span class="co"># Finally, nest the yearly data under the state and join the alberusa data set and create the function</span></span>
<span id="cb9-53"><a href="#cb9-53" aria-hidden="true" tabindex="-1"></a>awards_by_state_year <span class="ot">&lt;-</span> . <span class="sc">%&gt;%</span></span>
<span id="cb9-54"><a href="#cb9-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_count</span>(year, <span class="at">name =</span> <span class="st">"year_total_awards"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-55"><a href="#cb9-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state, year, year_total_awards) <span class="sc">%&gt;%</span> </span>
<span id="cb9-56"><a href="#cb9-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">state_year_total_awards =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb9-57"><a href="#cb9-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb9-58"><a href="#cb9-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(<span class="fu">tibble</span>(<span class="at">state =</span> state.abb), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state"</span> <span class="ot">=</span> <span class="st">"state"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-59"><a href="#cb9-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_na</span>(<span class="fu">list</span>(<span class="at">year =</span> <span class="dv">1987</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-60"><a href="#cb9-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">complete</span>(state, <span class="fu">nesting</span>(year)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-61"><a href="#cb9-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_na</span>(<span class="fu">list</span>(<span class="at">state_year_total_awards =</span> <span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-62"><a href="#cb9-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb9-63"><a href="#cb9-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_total_awards =</span> <span class="fu">max</span>(year_total_awards, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-64"><a href="#cb9-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb9-65"><a href="#cb9-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct_of_year_total_awards =</span> state_year_total_awards <span class="sc">/</span> year_total_awards) <span class="sc">%&gt;%</span> </span>
<span id="cb9-66"><a href="#cb9-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state) <span class="sc">%&gt;%</span> </span>
<span id="cb9-67"><a href="#cb9-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-68"><a href="#cb9-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(albersusa<span class="sc">::</span><span class="fu">usa_sf</span>(<span class="st">"laea"</span>), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state"</span><span class="ot">=</span><span class="st">"iso_3166_2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then we can plug the function and pipeline the data frame through and into a gganimate output.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>chorpleth <span class="ot">&lt;-</span> gabf <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">awards_by_state_year</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(data) <span class="sc">%&gt;%</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">geometry =</span> geometry, <span class="at">fill =</span> pct_of_year_total_awards, <span class="at">group =</span> year)) <span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">"magma"</span>, <span class="at">alpha =</span> .<span class="dv">9</span>, <span class="at">begin =</span> .<span class="dv">1</span>, <span class="at">labels =</span> scales<span class="sc">::</span>percent) <span class="sc">+</span> </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">'Percent of Total Awards by State, Year: {round(frame_time,0)}'</span>, <span class="at">fill =</span> <span class="st">"Awards"</span>) <span class="sc">+</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_blog</span>(<span class="at">axis.text =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>(),</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">axis.ticks =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transition_time</span>(year) <span class="sc">+</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ease_aes</span>(<span class="st">'linear'</span>)</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="fu">animate</span>(chorpleth, <span class="at">fps =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/choropleth_by_year-1.gif" class="img-fluid"></p>
</div>
</div>
</section>
<section id="interactive-tie-fighter-plot-line-chart" class="level3">
<h3 class="anchored" data-anchor-id="interactive-tie-fighter-plot-line-chart">Interactive TIE Fighter Plot &amp; Line Chart</h3>
<p>Looking at the animation, you can see Wisconsin has lost a proportion of total awards over the 34 years. This view does not provide clarity regarding where those proportions are going. To see the trend of awards for the state, I visualized a logistic regression model in a <a href="https://www.r-bloggers.com/2012/05/alternate-way-of-plotting-means-and-errors/">TIE fighter plot</a>. A logistic regression model provides a useful summary for the 34 years of awards for each state, but I wanted to keep the annual context so I thought the TIE fighter plot would work better accompanied with a line chart. I decided to add in dynamic highlighting so that both visuals can be used interactively. I used <a href="https://github.com/rstudio/crosstalk">crosstalk</a> and <a href="https://github.com/ropensci/plotly">plotly</a> to build in the interactivity. Crosstalk enables htmlwidgets with cross-widget interactions (highlighting and filtering). Plotly builds interactive graphs and the author wrote a <code>ggplotly()</code> function that will convert ggplot2 graphics to plotly, brilliant! Now I can build interactive data visualizations without knowing much more than ggplot.</p>
<p align="center">
</p><p><img src="https://media.giphy.com/media/l1I1mA5rJj8SRGBu9a/giphy.gif" class="img-fluid" width="500"></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>